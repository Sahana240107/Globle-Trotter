<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Globe Trotter | Register</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>

<div class="container">
  <div class="card large">

    <!-- Logo -->
    <h1 class="title">Create Account</h1>
    <p class="subtitle">Join Globe Trotter üåç</p>

    <div class="form-grid">
      <input id="firstName" type="text" placeholder="First Name *">
      <input id="lastName" type="text" placeholder="Last Name">

      <input id="email" type="email" placeholder="Email Address *">
      <input id="phone" type="text" placeholder="Phone Number">

      <input id="city" type="text" placeholder="City">
      <input id="country" type="text" placeholder="Country">

      <input id="password" type="password" placeholder="Password *">
    </div>

    <textarea placeholder="Additional Information..."></textarea>

    <button class="btn primary" onclick="registerUser()">Register</button>

    <p class="auth-link">
      Already registered?
      <a href="index.html">Login</a>
    </p>

  </div>
</div>

<script>
async function registerUser() {
    console.log("Register button clicked");

  const data = {
    first_name: document.getElementById("firstName").value,
    last_name: document.getElementById("lastName").value,
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    city: document.getElementById("city").value,
    country: document.getElementById("country").value,
    password: document.getElementById("password").value
  };

  if (!data.first_name || !data.email || !data.password) {
    alert("Please fill all required fields");
    return;
  }

  try {
    const response = await fetch(
      "http://localhost:5000/api/auth/register",
      {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      }
    );

    const result = await response.json();

    if (!response.ok) {
      alert(result.message);
      return;
    }

    alert("Registration successful");
    window.location.href = "index.html";

  } catch (error) {
    alert("Backend not reachable");
    console.error(error);
  }
}
</script>


</body>
</html>
